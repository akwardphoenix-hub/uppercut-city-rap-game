name: Copilot setup steps (pre-firewall)
version: 1
# NOTE: This setup does NOT regenerate documentation or instructions
# All documentation files are frozen as source of truth
# No doc regeneration steps should be added here to avoid CI loops
steps:
  - name: Use Node 20
    run: |
      node -v || true
      npm -v || true
  - name: Install deps
    run: npm ci
  - name: Install Playwright Chromium
    run: npx playwright install chromium
  - name: Typecheck & Lint
    run: |
      npm run typecheck --if-present
      npm run lint --if-present
  - name: Build
    run: npm run build
  - name: Smoke preview
    run: |
      (npm run preview &) && sleep 2
      curl -sSf http://localhost:4173 > /dev/null
